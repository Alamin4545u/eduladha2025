<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cash Box Pro</title>
    <!-- Telegram Web App script -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- Firebase Apps -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
    <style>
        :root {
            --bg-color: #f0f2f5;
            --card-bg: #ffffff;
            --primary-color: #007bff;
            --text-color: #333;
            --light-text: #777;
            --accent-color: #8a2be2;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0 0 70px 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            -webkit-user-select: none;
            -ms-user-select: none; 
            user-select: none; 
        }

        .container {
            padding: 15px;
        }

        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .user-info {
            display: flex;
            align-items: center;
        }

        .avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background-color: var(--accent-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 20px;
            margin-right: 10px;
        }
        
        .user-details h4, .user-details p {
            margin: 0;
        }
        .user-details h4 {
            font-size: 16px;
        }
        .user-details p {
            font-size: 13px;
            color: var(--light-text);
        }

        .balance {
            text-align: right;
        }
        .balance p {
            margin: 0;
            color: var(--light-text);
            font-size: 14px;
        }
        .balance h3 {
            margin: 0;
            color: var(--primary-color);
            font-size: 22px;
        }

        .welcome-banner {
            background: linear-gradient(135deg, #e0f7fa, #b2ebf2);
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            margin-bottom: 20px;
        }
        .welcome-banner h2 {
            margin: 0 0 5px 0;
        }
        .welcome-banner p {
            margin: 0;
            color: #00796b;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .stat-card, .card {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .stat-card p {
            margin: 0 0 8px 0;
            color: var(--light-text);
            font-size: 14px;
        }
        .stat-card h3 {
            margin: 0;
            font-size: 20px;
        }
        .stat-card.full-width {
            grid-column: 1 / -1;
        }
        
        .progress-bar {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 8px;
            height: 8px;
            overflow: hidden;
            margin-top: 10px;
        }
        .progress-bar-inner {
            width: 2%; /* Example value */
            height: 100%;
            background-color: var(--primary-color);
            border-radius: 8px;
        }
        
        .card h3 {
            margin-top: 0;
        }
        .referral-item {
            display: flex;
            align-items: center;
            background-color: #f0f8ff;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        .referral-item span {
            margin-left: 10px;
        }

        .referral-link {
            background-color: #e9ecef;
            padding: 12px;
            border-radius: 8px;
            word-wrap: break-word;
            font-family: monospace;
            margin-bottom: 15px;
        }
        
        .btn {
            display: block;
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            background-color: var(--primary-color);
            color: white;
            font-size: 16px;
            font-weight: bold;
            text-align: center;
            cursor: pointer;
            box-sizing: border-box;
            text-decoration: none;
        }
        .btn-secondary {
            background-color: #6c757d;
        }
        .btn-success {
            background-color: #28a745;
        }
        
        .task-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .task-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }
        .task-header h4, .task-header p { margin: 0; }
        .task-header h4 { font-size: 16px; }
        .task-header .reward { font-size: 16px; font-weight: bold; color: var(--primary-color); }
        .task-body p { color: var(--light-text); font-size: 14px; margin: 10px 0; }
        .task-actions {
            display: flex;
            gap: 10px;
        }
        .task-actions .btn {
            flex: 1;
        }
        .btn.disabled {
            background-color: #ced4da;
            cursor: not-allowed;
        }

        .page {
            display: none;
        }
        .page.active {
            display: block;
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-around;
            background-color: var(--card-bg);
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            padding: 5px 0;
            border-top: 1px solid #eee;
        }
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--light-text);
            padding: 5px 15px;
            cursor: pointer;
            border-radius: 10px;
            transition: background-color 0.3s, color 0.3s;
        }
        .nav-item.active {
            color: var(--primary-color);
        }
        .nav-item svg {
            width: 24px;
            height: 24px;
            margin-bottom: 4px;
        }
        .nav-item span {
            font-size: 12px;
        }
        
        /* Withdraw Page Styles */
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #ccc;
            box-sizing: border-box;
            font-size: 16px;
        }
        
        .payment-method {
            position: relative;
        }
        
        .payment-method .logo {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            width: 24px;
            height: 24px;
        }
        
        .payment-method select {
            padding-left: 40px;
        }

        /* Ad Simulation Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
        }
        .modal-content h3 { margin-top: 0; }
        .modal-content #timer {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
            margin: 15px 0;
        }
    </style>
</head>
<body>

    <!-- Home Page -->
    <div id="home-page" class="page active">
        <div class="container">
            <div class="header">
                <div class="user-info">
                    <div class="avatar" id="user-avatar">?</div>
                    <div class="user-details">
                        <h4 id="user-name">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</h4>
                        <p id="user-username">@‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
                    </div>
                </div>
                <div class="balance">
                    <p>‡¶â‡¶™‡¶≤‡¶¨‡ßç‡¶ß ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏</p>
                    <h3 id="available-balance">‡ß≥‡ß¶.‡ß¶‡ß¶</h3>
                </div>
            </div>

            <div class="welcome-banner">
                <h2>üëã ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ!</h2>
                <p>‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞ ‡¶ú‡¶ø‡¶§‡¶§‡ßá ‡¶ï‡¶æ‡¶ú‡¶ó‡ßÅ‡¶≤‡ßã ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <p>‡¶Æ‡ßã‡¶ü ‡¶Ü‡ßü</p>
                    <h3 id="total-earnings">‡ß≥‡ß¶.‡ß¶‡ß¶</h3>
                </div>
                <div class="stat-card">
                    <p>‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤</p>
                    <h3 id="referrals">‡ß¶</h3>
                </div>
                <div class="stat-card full-width">
                    <p>‡¶Ö‡¶∞‡ßç‡¶ú‡¶ø‡¶§ ‡¶ï‡¶Æ‡¶ø‡¶∂‡¶®</p>
                    <h3>‡ß≥‡ß¶.‡ß¶‡ß¶</h3>
                </div>
            </div>

            <div class="card">
                <h3>‡¶¶‡ßà‡¶®‡¶ø‡¶ï ‡¶Ö‡¶ó‡ßç‡¶∞‡¶ó‡¶§‡¶ø</h3>
                <p>‡¶Ü‡¶™‡¶®‡¶ø ‡¶Ü‡¶ú ‡ß´‡ß¶‡¶ü‡¶ø ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®</p>
                <div class="progress-bar">
                    <div id="daily-progress-bar" class="progress-bar-inner"></div>
                </div>
                 <small id="daily-progress-text">‡¶Ü‡¶ú: ‡ß¶/‡ß´‡ß¶</small>
            </div>

            <br>

            <div class="card">
                <h3>‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶ì ‡¶Ü‡ßü ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                <div class="referral-item">
                    <span>üéÅ ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ‡¶∞‡¶æ ‡¶™‡¶æ‡¶¨‡ßá <strong>‡ß®‡ß¶ ‡ß≥</strong> ‡¶¨‡ßã‡¶®‡¶æ‡¶∏</span>
                </div>
                <div class="referral-item">
                    <span>üíµ ‡¶Ü‡¶™‡¶®‡¶ø ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá <strong>‡ß´ ‡ß≥</strong> ‡¶™‡¶æ‡¶¨‡ßá‡¶®</span>
                </div>
                <p style="margin-top: 15px;">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï:</p>
                <div class="referral-link" id="referral-link">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
                <button class="btn" id="share-btn">‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </div>
        </div>
    </div>

    <!-- Tasks Page -->
    <div id="tasks-page" class="page">
         <div class="container">
            <h2>‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶® üéÅ</h2>
            <div class="task-card">
                <div class="task-header">
                    <div>
                        <h4>‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</h4>
                    </div>
                    <span class="reward">‡ß≥‡ß¶.‡ß´‡ß¶</span>
                </div>
                <div class="task-body">
                    <p>‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞ ‡¶™‡ßá‡¶§‡ßá ‡¶õ‡ßã‡¶ü ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®‡•§</p>
                </div>
                <button class="btn" id="watch-ad-btn">‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
            </div>
            
            <div class="task-card">
                <div class="task-header">
                    <div>
                        <h4>Cash Box Pro Official ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤</h4>
                    </div>
                     <span class="reward">‡ß≥‡ß¶.‡ß´‡ß¶</span>
                </div>
                <div class="task-body">
                    <p>‡¶∏‡¶¨‡¶æ‡¶á ‡¶∏‡¶†‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶ï‡¶Æ‡¶™‡ßç‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶¨‡ßá‡¶® ‡¶§‡¶æ ‡¶®‡¶æ ‡¶π‡¶≤‡ßá ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶æ‡¶¨‡ßá‡¶® ‡¶®‡¶æ‡•§</p>
                </div>
                <div class="task-actions">
                     <a href="https://t.me/CashBox1367" target="_blank" class="btn btn-secondary">‡¶Ø‡ßã‡¶ó ‡¶¶‡¶ø‡¶®</a>
                     <button class="btn" onclick="alert('‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶¨‡ßà‡¶∂‡¶ø‡¶∑‡ßç‡¶ü‡ßç‡¶Ø‡¶ü‡¶ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶•‡ßá‡¶ï‡ßá ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§')">‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Support Page -->
    <div id="support-page" class="page" style="text-align:center; padding-top: 50px;">
        <div class="container">
            <svg style="width:80px; height:80px; color: var(--primary-color);" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
            <h2>‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®?</h2>
            <p>‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
            <br>
            <button id="contact-support-btn" class="btn">‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </div>
    </div>

    <!-- Withdraw Page -->
    <div id="withdraw-page" class="page">
        <div class="container">
            <h2>‡¶ü‡¶æ‡¶ï‡¶æ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®</h2>
            <div class="card">
                <h4>‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡ßÄ‡¶Ø‡¶º‡¶§‡¶æ</h4>
                <div>
                    <label>‡¶®‡ßç‡¶Ø‡ßÇ‡¶®‡¶§‡¶Æ ‡ßß‡ßß‡ß¶ ‡ß≥ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ (<span id="balance-progress-text">‡ß®‡ß¶/‡ßß‡ßß‡ß¶</span>)</label>
                    <div class="progress-bar">
                        <div class="progress-bar-inner" id="balance-progress-bar" style="width: 18%;"></div>
                    </div>
                </div>
                <div style="margin-top: 10px;">
                    <label>‡¶®‡ßç‡¶Ø‡ßÇ‡¶®‡¶§‡¶Æ ‡ß®‡ß¶ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ (<span id="referral-progress-text">‡ß¶/‡ß®‡ß¶</span>)</label>
                    <div class="progress-bar">
                        <div class="progress-bar-inner" id="referral-progress-bar" style="width: 0%;"></div>
                    </div>
                </div>
            </div>
            <div id="withdraw-requirement-notice" class="card" style="margin-top:15px; background-color: #ffebee; color: #c62828; text-align: center;">
                ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡ßß‡ßß‡ß¶ ‡ß≥ ‡¶è‡¶¨‡¶Ç ‡ß®‡ß¶‡¶ü‡¶ø ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡•§
            </div>
            
            <div class="card" style="margin-top: 15px;">
                 <div class="form-group">
                    <label for="payment-method">‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø</label>
                    <div class="payment-method">
                        <img id="payment-logo" src="https://i.ibb.co/L0f5bXN/bkash.png" class="logo">
                        <select id="payment-method">
                            <option value="Bkash" data-logo="https://i.ibb.co/L0f5bXN/bkash.png">‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂</option>
                            <option value="Nagad" data-logo="https://i.ibb.co/qYdG2sW/nagad.png">‡¶®‡¶ó‡¶¶</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="account-number">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶§‡¶•‡ßç‡¶Ø</label>
                    <input type="text" id="account-number" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®">
                </div>
                <div class="form-group">
                    <label for="amount">‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ (‡ß≥)</label>
                    <input type="number" id="amount" placeholder="‡¶®‡ßç‡¶Ø‡ßÇ‡¶®‡¶§‡¶Æ: ‡ßß‡ßß‡ß¶.‡ß¶‡ß¶, ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö: ‡ß®‡ß¶‡ß¶‡ß¶.‡ß¶‡ß¶">
                </div>
                <button id="submit-withdraw-btn" class="btn">‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®</button>
            </div>
            
            <div class="card" style="margin-top: 15px;">
                <h4>‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®‡ßá‡¶∞ ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏</h4>
                <div id="withdrawal-history">
                    <p style="text-align: center; color: var(--light-text);">‡¶ï‡ßã‡¶®‡ßã ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø‡•§</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Ad Simulation Modal -->
    <div id="ad-modal" class="modal">
        <div class="modal-content">
            <h3>‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</h3>
            <p>‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®...</p>
            <div id="timer">10</div>
            <button id="claim-reward-btn" class="btn btn-success" style="display:none;">‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞ ‡¶¶‡¶æ‡¶¨‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </div>
    </div>

    <!-- Bottom Navigation Bar -->
    <nav class="bottom-nav">
        <div class="nav-item active" data-page="home-page">
            <svg fill="currentColor" viewBox="0 0 20 20"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path></svg>
            <span>‡¶π‡ßã‡¶Æ</span>
        </div>
        <div class="nav-item" data-page="tasks-page">
            <svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
            <span>‡¶ü‡¶æ‡¶∏‡ßç‡¶ï</span>
        </div>
        <div class="nav-item" data-page="support-page">
            <svg fill="currentColor" viewBox="0 0 20 20"><path d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"></path></svg>
            <span>‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü</span>
        </div>
        <div class="nav-item" data-page="withdraw-page">
            <svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v4a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm0 6a2 2 0 00-2 2v2a2 2 0 002 2h12a2 2 0 002-2v-2a2 2 0 00-2-2H4z" clip-rule="evenodd"></path></svg>
            <span>‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞</span>
        </div>
    </nav>
    
<script>
    // --- ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ø‡¶º‡¶æ‡¶∞‡¶¨‡ßá‡¶∏ ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞‡ßá‡¶∂‡¶® ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶™‡ßá‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® ---
    const firebaseConfig = {
        apiKey: "AIzaSyBidXnyxl4LjnRW6z5PrQ_iOKzqjjrxRtM",
        authDomain: "comexaple.firebaseapp.com",
        projectId: "comexaple",
        storageBucket: "comexaple.appspot.com",
        messagingSenderId: "799294329351",
        appId: "1:799294329351:web:0bb9620bc1d227a29650a2",
        measurementId: "G-LRBREF5QV6"
    };

    // Firebase ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶ï‡¶∞‡¶æ
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const tg = window.Telegram.WebApp;

    document.addEventListener('DOMContentLoaded', function () {
        tg.ready();
        
        let currentUser = {};
        let appSettings = {};
        
        const user = tg.initDataUnsafe.user;
        
        if (!user) {
             // ‡¶ü‡ßá‡¶∏‡ßç‡¶ü‡¶ø‡¶Ç ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ö‡¶¨‡¶ú‡ßá‡¶ï‡ßç‡¶ü
            currentUser = {
                id: '12345678',
                first_name: 'Test',
                last_name: 'User',
                username: 'testuser',
                is_bot: false,
                language_code: 'en'
            };
            console.warn("‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø‡•§ ‡¶ü‡ßá‡¶∏‡ßç‡¶ü‡¶ø‡¶Ç ‡¶°‡ßá‡¶ü‡¶æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶π‡¶ö‡ßç‡¶õ‡ßá‡•§");
            loadUserData();
        } else {
             currentUser = user;
             loadUserData();
        }


        // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶è‡¶¨‡¶Ç UI ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        async function loadUserData() {
            // UI ‡¶§‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶è‡¶¨‡¶Ç ‡¶Ü‡¶á‡¶°‡¶ø ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã
            const fullName = `${currentUser.first_name || ''} ${currentUser.last_name || ''}`.trim();
            document.getElementById('user-name').textContent = fullName;
            document.getElementById('user-username').textContent = currentUser.username ? `@${currentUser.username}` : 'N/A';
            document.getElementById('user-avatar').textContent = (fullName[0] || '?').toUpperCase();
            
            // Firebase ‡¶•‡ßá‡¶ï‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶è‡¶¨‡¶Ç ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶Ü‡¶®‡¶æ
            const settingsDoc = await db.collection('settings').doc('appConfig').get();
            if (settingsDoc.exists) {
                appSettings = settingsDoc.data();
            } else {
                // ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏
                appSettings = {
                    minWithdraw: 110,
                    maxWithdraw: 2000,
                    referralBonus: 5,
                    joinBonus: 20,
                    minReferrals: 20,
                    adReward: 0.50,
                    supportLink: 'https://t.me/your_support_contact' // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï
                };
            }
            
            const userRef = db.collection('users').doc(String(currentUser.id));
            const doc = await userRef.get();

            if (!doc.exists) {
                // ‡¶®‡¶§‡ßÅ‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ
                await userRef.set({
                    username: currentUser.username,
                    fullName: fullName,
                    balance: appSettings.joinBonus || 20,
                    totalEarnings: appSettings.joinBonus || 20,
                    referrals: 0,
                    adsWatchedToday: 0,
                    lastAdWatch: null
                });
                loadUserData(); // ‡¶°‡ßá‡¶ü‡¶æ ‡¶∞‡¶ø-‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ
            } else {
                updateUI(doc.data());
            }
        }
        
        // UI ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        function updateUI(data) {
            const balance = data.balance || 0;
            const totalEarnings = data.totalEarnings || 0;
            const referrals = data.referrals || 0;
            const adsWatched = data.adsWatchedToday || 0;

            document.getElementById('available-balance').textContent = `‡ß≥${balance.toFixed(2)}`;
            document.getElementById('total-earnings').textContent = `‡ß≥${totalEarnings.toFixed(2)}`;
            document.getElementById('referrals').textContent = referrals;

            // ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø
            // ‡¶è‡¶ñ‡¶æ‡¶®‡ßá 'YourBotUsername' ‡¶è‡¶∞ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶¨‡¶ü‡ßá‡¶∞ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ ‡¶¶‡¶ø‡¶®
            const botUsername = 'CashBoxPro_Bot';
            const referralLink = `https://t.me/${botUsername}?startapp=${currentUser.id}`;
            document.getElementById('referral-link').textContent = referralLink;
            
            // ‡¶¶‡ßà‡¶®‡¶ø‡¶ï ‡¶Ö‡¶ó‡ßç‡¶∞‡¶ó‡¶§‡¶ø‡¶∞ ‡¶¨‡¶æ‡¶∞
            const progress = (adsWatched / 50) * 100;
            document.getElementById('daily-progress-bar').style.width = `${progress}%`;
            document.getElementById('daily-progress-text').textContent = `‡¶Ü‡¶ú: ${adsWatched}/50`;
            
            // ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶™‡ßá‡¶ú‡ßá‡¶∞ ‡¶Ö‡¶ó‡ßç‡¶∞‡¶ó‡¶§‡¶ø
            updateWithdrawUI(balance, referrals);
        }

        // ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ UI ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
        function updateWithdrawUI(balance, referrals) {
             const minBalance = appSettings.minWithdraw || 110;
             const minRefs = appSettings.minReferrals || 20;

             const balanceProgress = Math.min((balance / minBalance) * 100, 100);
             const refProgress = Math.min((referrals / minRefs) * 100, 100);

             document.getElementById('balance-progress-text').textContent = `${balance.toFixed(0)}/${minBalance}`;
             document.getElementById('balance-progress-bar').style.width = `${balanceProgress}%`;
             document.getElementById('referral-progress-text').textContent = `${referrals}/${minRefs}`;
             document.getElementById('referral-progress-bar').style.width = `${refProgress}%`;
             
             const withdrawNotice = document.getElementById('withdraw-requirement-notice');
             const submitBtn = document.getElementById('submit-withdraw-btn');

             if(balance >= minBalance && referrals >= minRefs) {
                withdrawNotice.style.display = 'none';
                submitBtn.classList.remove('disabled');
                submitBtn.disabled = false;
             } else {
                withdrawNotice.style.display = 'block';
                submitBtn.classList.add('disabled');
                submitBtn.disabled = true;
             }
        }

        // ‡¶™‡ßá‡¶ú ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶≤‡¶ú‡¶ø‡¶ï
        const navItems = document.querySelectorAll('.nav-item');
        const pages = document.querySelectorAll('.page');
        navItems.forEach(item => {
            item.addEventListener('click', () => {
                navItems.forEach(i => i.classList.remove('active'));
                item.classList.add('active');
                
                const pageId = item.getAttribute('data-page');
                pages.forEach(p => p.classList.remove('active'));
                document.getElementById(pageId).classList.add('active');
            });
        });

        // ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶∏‡¶ø‡¶Æ‡ßÅ‡¶≤‡ßá‡¶∂‡¶®
        document.getElementById('watch-ad-btn').addEventListener('click', () => {
            const modal = document.getElementById('ad-modal');
            modal.style.display = 'flex';
            
            // ‡¶è‡¶ñ‡¶æ‡¶®‡ßá Gigapub ‡¶¨‡¶æ Adexium ‡¶è‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶®‡ßá‡¶ü‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶ï‡ßá‡¶∞ SDK ‡¶ï‡¶≤ ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§
            // ‡¶Ø‡ßá‡¶π‡ßá‡¶§‡ßÅ ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶ï‡¶æ‡¶õ‡ßá SDK ‡¶®‡ßá‡¶á, ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞ ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶∏‡¶ø‡¶Æ‡ßÅ‡¶≤‡ßá‡¶∂‡¶® ‡¶ï‡¶∞‡¶¨‡•§
            let timeLeft = 10;
            const timerEl = document.getElementById('timer');
            const claimBtn = document.getElementById('claim-reward-btn');
            timerEl.textContent = timeLeft;
            claimBtn.style.display = 'none';

            const timerInterval = setInterval(() => {
                timeLeft--;
                timerEl.textContent = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timerEl.textContent = '‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®!';
                    claimBtn.style.display = 'block';
                }
            }, 1000);
        });

        // ‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞ ‡¶¶‡¶æ‡¶¨‡¶ø ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶≤‡¶ú‡¶ø‡¶ï
        document.getElementById('claim-reward-btn').addEventListener('click', async () => {
            const userRef = db.collection('users').doc(String(currentUser.id));
            const reward = appSettings.adReward || 0.50;

            try {
                await db.runTransaction(async (transaction) => {
                    const userDoc = await transaction.get(userRef);
                    if (!userDoc.exists) {
                        throw "Document does not exist!";
                    }
                    const newBalance = (userDoc.data().balance || 0) + reward;
                    const newTotalEarnings = (userDoc.data().totalEarnings || 0) + reward;
                    const newAdsWatched = (userDoc.data().adsWatchedToday || 0) + 1;
                    
                    transaction.update(userRef, { 
                        balance: newBalance,
                        totalEarnings: newTotalEarnings,
                        adsWatchedToday: newAdsWatched
                    });
                });
                alert(`‡¶Ü‡¶™‡¶®‡¶ø ‡ß≥${reward.toFixed(2)} ‡¶Ü‡ßü ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®!`);
                document.getElementById('ad-modal').style.display = 'none';
                loadUserData();
            } catch (e) {
                console.error("Transaction failed: ", e);
                alert("‡¶è‡¶ï‡¶ü‡¶ø ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
            }
        });

        // ‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶®
        document.getElementById('share-btn').addEventListener('click', () => {
            const referralLink = document.getElementById('referral-link').textContent;
            const shareText = `üí∞ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶¨‡¶ï‡ßç‡¶∏ ‡¶™‡ßç‡¶∞‡ßã-‡¶§‡ßá ‡¶Ø‡ßã‡¶ó ‡¶¶‡¶ø‡¶® ‡¶è‡¶¨‡¶Ç ‡¶Ü‡ßü ‡¶ï‡¶∞‡ßÅ‡¶®!\n\n‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï‡ßá ‡¶Ø‡ßã‡¶ó ‡¶¶‡¶ø‡¶≤‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡ß®‡ß¶ ‡ß≥ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶™‡¶æ‡¶¨‡ßá‡¶®!\n\n‡¶≤‡¶ø‡¶ô‡ßç‡¶ï:\n${referralLink}`;
            tg.openTelegramLink(`https://t.me/share/url?url=${encodeURIComponent(referralLink)}&text=${encodeURIComponent(shareText)}`);
        });

        // ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶¨‡¶æ‡¶ü‡¶®
        document.getElementById('contact-support-btn').addEventListener('click', () => {
            tg.openTelegramLink(appSettings.supportLink || 'https://t.me/your_support_contact');
        });
        
        // ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®
        const paymentMethodSelect = document.getElementById('payment-method');
        paymentMethodSelect.addEventListener('change', (e) => {
            const selectedOption = e.target.selectedOptions[0];
            document.getElementById('payment-logo').src = selectedOption.dataset.logo;
            document.getElementById('account-number').placeholder = `‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ${selectedOption.textContent} ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®`;
        });
        
        // ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®
        document.getElementById('submit-withdraw-btn').addEventListener('click', async () => {
             const method = document.getElementById('payment-method').value;
             const number = document.getElementById('account-number').value;
             const amount = parseFloat(document.getElementById('amount').value);
             
             if (!number || !amount) {
                 alert('‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
                 return;
             }
             if (amount < appSettings.minWithdraw) {
                 alert(`‡¶®‡ßç‡¶Ø‡ßÇ‡¶®‡¶§‡¶Æ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®‡ßá‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ${appSettings.minWithdraw} ‡ß≥‡•§`);
                 return;
             }
             
             const userRef = db.collection('users').doc(String(currentUser.id));
             const doc = await userRef.get();
             const currentBalance = doc.data().balance;
             
             if (amount > currentBalance) {
                 alert('‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡ßá ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶®‡ßá‡¶á‡•§');
                 return;
             }
             
             // ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß Firebase-‡¶è ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ
             await db.collection('withdrawals').add({
                 userId: currentUser.id,
                 username: currentUser.username,
                 amount: amount,
                 method: method,
                 number: number,
                 status: 'pending',
                 timestamp: firebase.firestore.FieldValue.serverTimestamp()
             });
             
             // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶ï‡¶Æ‡¶æ‡¶®‡ßã
             await userRef.update({
                 balance: currentBalance - amount
             });
             
             alert('‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§');
             loadUserData();
             // ‡¶´‡¶∞‡ßç‡¶Æ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü
             document.getElementById('account-number').value = '';
             document.getElementById('amount').value = '';
        });
    });
</script>
</body>
</html>
